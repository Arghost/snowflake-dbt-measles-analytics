version: 2

models:
  - name: dim_country
    description: "Country dimension built from coverage and cases staging models."
    columns:
      - name: country_code
        description: "ISO3 country code."
        tests:
          - not_null

      - name: country_name
        description: "Country name."
        tests:
          - not_null

      - name: region
        description: "Region associated to the country (can be null for some countries)."

  - name: fact_measles_coverage
    description: "Fact table with measles vaccination coverage by country and year."
    columns:
      - name: country_code
        tests:
          - not_null
          - relationships:
              to: ref('dim_country')
              field: country_code

      - name: country_name
        tests:
          - not_null

      - name: region

      - name: year
        tests:
          - not_null

      - name: measles_coverage_pct
        description: "Primary coverage metric (MCV1) used in downstream risk scoring."

  - name: fact_measles_cases
    description: "Fact table with measles reported cases by country and year."
    columns:
      - name: country_code
        tests:
          - not_null
          - relationships:
              to: ref('dim_country')
              field: country_code

      - name: country_name
        tests:
          - not_null

      - name: region

      - name: year
        tests:
          - not_null

      - name: measles_cases
        description: "Number of reported measles cases in that country-year."
